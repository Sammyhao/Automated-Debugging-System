 your communities  Find centralized, trusted content and collaborate around the technologies you use most.  Connect and share knowledge within a single location that is structured and easy to search.  I'm trying to iterate through a map, as shown below:  but as soon as the for line runs, I get an error stating "map/set iterators incompatible".  The data variable is a  It is a pointer because it is located in:  and that seems to not like anything that isn't a pointer.  I've tried multiple ways of iterating through this map and every attempt fails completely. I would really appreciate some insight into why this happens and how to solve it, thanks.  is the signature of the update function @Daniel. I can query the size but it is 0, as in my project, the server starts and then clients join which are iterated through. The project crashes with this error as soon as I start the server.  1 Answer 1  Since that function returns by value, you bind your pointer to an instance with automatic storage duration, whose lifetime ends with this line (a "temporary").  So in fact, later in your loop  you are dereferencing an invalid pointer, which yields undefined behaviour.  What really surprises me is that the code is even compiling. I couldn't get a testcase like this to work in ideone/GCC.  To work with that temporary returned by the update function, you have the following possibilities:  Store the map in a local variable.  Extend the lifetime of the temporary by binding it to a reference:  This doesn't work "upwards" in the call stack, so you can't return that reference.  Bring the loop into the full expression limiting the temporary's lifetime:  If the map stays alive after that update function (e.g. if it's a member of that server instance) then returning a (const) reference is probably the correct way of handling this.  I made some progress by using a temproary local map to store the result of the update function. This no longer crashes when I start up the server. However, everytime I try to use a breakpoint to analyse data, visual studio crashes?  Can't help you with visual studio, though using a local variable should work fine. So this is probably not related to that.  By clicking “Accept all cookies”, you agree Stack Exchange can store cookies on your device and disclose information in accordance with our Cookie Policy.  