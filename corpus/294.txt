 your communities  Find centralized, trusted content and collaborate around the technologies you use most.  Connect and share knowledge within a single location that is structured and easy to search.  I'm trying to develop a dynamic query builder for days. But I'm having a problem with building it.  What I'm reviving is a json like this.  Here is it in much readable way  this json can change according to the user inputs(can have more depth or less).  what I'm trying to do is create a search query for apache lucene...(for the moment lets assume that leaf values are just strings.)  It must be something like this(What I need)  (Year:another values OR (Report:some valeus AND Citation:some valeues))  I tried with Jettison library and used DefaultMutableTreeNode to create the tree structure . But it didn't work as I expected.Then i tried whit recursive functions and it also didn't worked  I want to is it possible to create this kind of thing. If yes how to do.  Your attempt is highly appreciated! Thanks in advance.  3 Answers 3  Ok Now the requirement is clear and here is the solution  define your operations  Write a class to hold you atomic operaton  Now if You want something like (Year:another values OR (Report:some valeus AND Citation:some valeues))  your JSON should look like :  So First Cast this JSON to AtominOperation class using the code  The Final AtomicOperation Object would be what u want. :)  1,12211 gold badge77 silver badges1212 bronze badges  3  I have small question what if user send something like this (Year:another values OR (Report:some valeus AND Citation:some valeues AND Field: another)) . Then the AtomicOperation class is not valid right ?  It Still is. It will look like {{Year:['2001','2002']} OR {{Report:['Report1']} AND {Citation:['Citation1']} AND {Field:another}}} Actually Speaking, you need more operators like EQUAL_TO , IN so that you can write like this {Year IN [values] OR {{Report IN [values]} AND {Citation IN [values]} AND {Field EQUAL_TO "value"}}}  Hey I'tried with that... But I'm getting an error NullPointerException at deriveFromJSON() first line. If you have written the code could you please post whole code as a answer!  (Year:another values OR (Report:some valeus AND Citation:some valeues AND Field: another))  should be something like :  if The MYOperator enum is :  and AtomicOperation Is  Then You can Build the necessary AtomicOperation Object using the below code  with that what I'm getting is "({lhs={lhs={lhs=Field, rhs=Value, operator=EQUAL_TO}, rhs={lhs=Citation, rhs=Citation, operator=EQUAL_TO}, operator=AND}, rhs={lhs=Report, rhs=Report1, operator=EQUAL_TO}, operator=AND} OR {lhs=Year, rhs=2001, operator=EQUAL_TO})" I think it's because AtomicOperation to string get executed only one time  hey i have edited the code...copy the entire edited code with updated toString method then finally call _r.toString() and you will get ((((Field : Value) AND (Citation : Citation)) AND (Report : Report1)) OR (Year : 2001)) as output.  ConvertJsonToObject.getFromJSON(json, AtomicOperation.class) gives "({lhs={lhs={lhs=Field, rhs=Value, operator=EQUAL_TO}, rhs={lhs=Citation, rhs=Citation, operator=EQUAL_TO}, operator=AND}, rhs={lhs=Report, rhs=Report1, operator=EQUAL_TO}, operator=AND} OR {lhs=Year, rhs=2001, operator=EQUAL_TO})" and it never execute "if (operation.getLhs().getClass().equals(LinkedHashMap.class)) " part. At the end produce same output!! The enum should be in the main class right ??  1,12211 gold badge77 silver badges1212 bronze badges  1  But how to create some thing like (Year:another values OR (Report:some valeus AND Citation:some valeues))  By clicking “Accept all cookies”, you agree Stack Exchange can store cookies on your device and disclose information in accordance with our Cookie Policy.  