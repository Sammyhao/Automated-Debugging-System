 your communities  Find centralized, trusted content and collaborate around the technologies you use most.  Connect and share knowledge within a single location that is structured and easy to search.  I am trying to implement BFS on directed graph. I am perfectly sure I got my algorithm correct, however, following piece of code is returning error:  Graph.CPP file:  And Actual BFS Implementation IN:  So, error appears that except source node, every other node in queue gives wrong adjacency list. While Queue order works perfectly, The nodes in queue give wrong adjacency.  I am not sure why it is happening, though I suspect it is due copy of nodes by value rather than reference.  This is my CPP program after a long interval, so if I am missing something, please enlighten me.  "I suspect it is due copy of nodes by value rather than reference" - I think you answered your own question.  1 Answer 1  you exactly stated the problem. When you add 'n1.add_edge(n2);', n2 does not have any edge and n1 will keep a copy of n2. Later on, when you add more edges to n2, n1's copy does not change. I modified your code to use pointers and I think it works correctly now.  By clicking “Accept all cookies”, you agree Stack Exchange can store cookies on your device and disclose information in accordance with our Cookie Policy.  